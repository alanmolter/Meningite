
    <!DOCTYPE html>
    <html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Guia de Deployment - IMUNOPREVINIVEIS</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                margin: 2cm;
                color: #333;
                max-width: 1200px;
                margin-left: auto;
                margin-right: auto;
            }
            
            h1, h2, h3, h4, h5, h6 {
                color: #2c3e50;
                margin-top: 1.5em;
                margin-bottom: 0.5em;
            }
            
            h1 {
                font-size: 2.5em;
                border-bottom: 3px solid #3498db;
                padding-bottom: 0.3em;
                text-align: center;
            }
            
            h2 {
                font-size: 2em;
                border-bottom: 2px solid #ecf0f1;
                padding-bottom: 0.2em;
                color: #34495e;
            }
            
            h3 {
                font-size: 1.5em;
                color: #34495e;
            }
            
            code {
                background-color: #f8f9fa;
                padding: 0.2em 0.4em;
                border-radius: 3px;
                font-family: 'Courier New', monospace;
                font-size: 0.9em;
                border: 1px solid #e9ecef;
            }
            
            pre {
                background-color: #f8f9fa;
                padding: 1em;
                border-radius: 5px;
                border-left: 4px solid #3498db;
                overflow-x: auto;
                border: 1px solid #e9ecef;
            }
            
            pre code {
                background-color: transparent;
                padding: 0;
                border: none;
            }
            
            blockquote {
                border-left: 4px solid #3498db;
                margin: 1em 0;
                padding-left: 1em;
                color: #7f8c8d;
                background-color: #f8f9fa;
                padding: 1em;
                border-radius: 5px;
            }
            
            table {
                border-collapse: collapse;
                width: 100%;
                margin: 1em 0;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            
            th, td {
                border: 1px solid #ddd;
                padding: 0.8em;
                text-align: left;
            }
            
            th {
                background-color: #3498db;
                color: white;
                font-weight: bold;
            }
            
            tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            
            tr:hover {
                background-color: #f5f5f5;
            }
            
            .toc {
                background-color: #f8f9fa;
                padding: 1em;
                border-radius: 5px;
                margin: 1em 0;
                border: 1px solid #e9ecef;
            }
            
            .toc ul {
                list-style-type: none;
                padding-left: 1em;
            }
            
            .toc a {
                text-decoration: none;
                color: #3498db;
            }
            
            .toc a:hover {
                text-decoration: underline;
            }
            
            hr {
                border: none;
                border-top: 2px solid #ecf0f1;
                margin: 2em 0;
            }
            
            ul, ol {
                padding-left: 2em;
            }
            
            li {
                margin: 0.5em 0;
            }
            
            a {
                color: #3498db;
                text-decoration: none;
            }
            
            a:hover {
                text-decoration: underline;
            }
            
            .emoji {
                font-size: 1.2em;
            }
            
            @media print {
                body {
                    margin: 1cm;
                }
                
                h1, h2, h3, h4, h5, h6 {
                    page-break-after: avoid;
                }
                
                pre, blockquote {
                    page-break-inside: avoid;
                }
                
                table {
                    page-break-inside: avoid;
                }
            }
        </style>
    </head>
    <body>
        <h1 id="guia-completo-de-deployment-dashboard-imunopreviniveis-brasil">Guia Completo de Deployment - Dashboard IMUNOPREVINIVEIS Brasil</h1>

<h2 id="indice">üìã √çndice</h2>

<ol>
<li><a href="#como-a-aplica√ß√£o-funciona-localmente">Como a Aplica√ß√£o Funciona Localmente</a></li>
<li><a href="#arquitetura-do-projeto">Arquitetura do Projeto</a></li>
<li><a href="#deployment-em-servidor-institucional">Deployment em Servidor Institucional</a></li>
<li><a href="#requisitos-de-sistema">Requisitos de Sistema</a></li>
<li><a href="#configura√ß√£o-de-seguran√ßa">Configura√ß√£o de Seguran√ßa</a></li>
<li><a href="#manuten√ß√£o-e-atualiza√ß√µes">Manuten√ß√£o e Atualiza√ß√µes</a></li>
</ol>

<p>---Todas as tecnologias e implementa√ß√µes nescessarias para o deploy da aplica√ß√£o no SERVIDOR se encontram na se√ß√£o REQUISITOS DO SISTEMA.</p>

<h2 id="como-a-aplicacao-funciona-localmente">üè† Como a Aplica√ß√£o Funciona Localmente</h2>

<h3 id="o-que-e-o-streamlit">O que √© o Streamlit?</h3>

<p>O <strong>Streamlit</strong> √© uma biblioteca Python que permite criar aplica√ß√µes web interativas diretamente a partir de c√≥digo Python. Ele √© especialmente √∫til para dashboards de dados, visualiza√ß√µes cient√≠ficas e aplica√ß√µes de an√°lise.</p>

<h3 id="como-funciona-o-desenvolvimento-local">Como Funciona o Desenvolvimento Local?</h3>

<h4 id="1-ambiente-virtual-python">1. <strong>Ambiente Virtual Python</strong></h4>

<ul>
<li>Um <strong>ambiente virtual</strong> √© como uma "caixa isolada" onde instalamos apenas as bibliotecas necess√°rias para este projeto</li>
<li>Evita conflitos com outras vers√µes de Python ou bibliotecas do sistema</li>
<li>No projeto: pasta <code>.venv/</code> cont√©m este ambiente isolado</li>
</ul>

<h4 id="2-execucao-da-aplicacao">2. <strong>Execu√ß√£o da Aplica√ß√£o</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Ativar o ambiente virtual</span>
.venv<span class="se">\S</span>cripts<span class="se">\A</span>ctivate.ps1<span class="w">  </span><span class="c1"># Windows PowerShell</span>
<span class="c1"># ou</span>
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w">    </span><span class="c1"># Linux/Mac</span>

<span class="c1"># Verificar vers√£o do Python</span>
python<span class="w"> </span>--version<span class="w">  </span><span class="c1"># Deve mostrar Python 3.13.7 ou superior</span>

<span class="c1"># Executar a aplica√ß√£o</span>
streamlit<span class="w"> </span>run<span class="w"> </span>app/main.py
</code></pre>
</div>

<h4 id="3-o-que-acontece-quando-executamos">3. <strong>O que Acontece Quando Executamos?</strong></h4>

<ol>
<li><strong>Streamlit inicia um servidor web local</strong> na sua m√°quina</li>
<li><strong>Compila o c√≥digo Python</strong> em uma interface web</li>
<li><strong>Abre automaticamente o navegador</strong> no endere√ßo <code>http://localhost:8501</code></li>
<li><strong>Mant√©m o servidor rodando</strong> enquanto voc√™ desenvolve</li>
</ol>

<h4 id="4-o-que-e-localhost-e-por-que-nao-e-acessivel-pela-internet">4. <strong>O que √© Localhost e Por que N√£o √© Acess√≠vel pela Internet?</strong></h4>

<h5 id="o-que-e-localhost"><strong>O que √© Localhost?</strong></h5>

<ul>
<li><strong>Localhost</strong> = "esta m√°quina" (127.0.0.1)</li>
<li><strong>Porta 8501</strong> = "canal de comunica√ß√£o" espec√≠fico</li>
<li><strong>http://localhost:8501</strong> = endere√ßo para acessar a aplica√ß√£o rodando na SUA m√°quina</li>
</ul>

<h5 id="por-que-localhost-nao-e-acessivel-pela-internet"><strong>Por que Localhost N√£o √© Acess√≠vel pela Internet?</strong></h5>

<pre><code>Internet ‚Üí Roteador ‚Üí Sua M√°quina (localhost:8501)
    ‚ùå     ‚ùå         ‚úÖ (apenas voc√™)
</code></pre>

<p><strong>1. Endere√ßo IP Privado:</strong>
- <strong>127.0.0.1</strong> √© um endere√ßo IP <strong>reservado</strong> e <strong>privado</strong>
- Significa literalmente "esta m√°quina aqui"
- N√£o √© rote√°vel pela internet</p>

<p><strong>2. Roteamento de Rede:</strong>
- <strong>Internet p√∫blica</strong> n√£o sabe onde est√° o endere√ßo 127.0.0.1
- Cada pessoa tem seu pr√≥prio 127.0.0.1 (sua pr√≥pria m√°quina)
- √â como um "endere√ßo interno" que s√≥ funciona na sua casa</p>

<p><strong>3. Firewall e Seguran√ßa:</strong>
- <strong>Roteadores dom√©sticos</strong> bloqueiam conex√µes externas por padr√£o
- <strong>ISP (provedor de internet)</strong> n√£o encaminha tr√°fego para 127.0.0.1
- <strong>Sua m√°quina</strong> n√£o est√° configurada para aceitar conex√µes externas</p>

<p><strong>4. Analogia Simples:</strong>
- <strong>Localhost</strong> = endere√ßo da sua casa (s√≥ voc√™ sabe onde fica)
- <strong>Internet</strong> = cidade grande (n√£o sabe onde fica sua casa)
- <strong>Servidor</strong> = endere√ßo p√∫blico com placa na rua (todos podem encontrar)</p>

<h4 id="5-fluxo-de-funcionamento-local">5. <strong>Fluxo de Funcionamento Local</strong></h4>

<pre><code>Seu C√≥digo Python ‚Üí Streamlit ‚Üí Servidor Local ‚Üí Navegador
     ‚Üì
app/main.py ‚Üí Interface Web ‚Üí http://localhost:8501 ‚Üí Dashboard
</code></pre>

<hr />

<h2 id="arquitetura-do-projeto">üèóÔ∏è Arquitetura do Projeto</h2>

<h3 id="estrutura-de-pastas">Estrutura de Pastas</h3>

<pre><code>imunopreviniveis/
‚îú‚îÄ‚îÄ app/                          # Aplica√ß√£o principal
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              # Torna a pasta um pacote Python
‚îÇ   ‚îî‚îÄ‚îÄ main.py                  # Arquivo principal da aplica√ß√£o
‚îú‚îÄ‚îÄ app_sections/                 # M√≥dulos organizados por funcionalidade
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              # Pacote de se√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ overview.py              # Vis√£o geral dos dados
‚îÇ   ‚îú‚îÄ‚îÄ cases.py                 # An√°lise de casos
‚îÇ   ‚îú‚îÄ‚îÄ sorogrupos.py            # An√°lise de sorogrupos
‚îÇ   ‚îú‚îÄ‚îÄ etiologia.py             # An√°lise de etiologia
‚îÇ   ‚îú‚îÄ‚îÄ imunizacao.py            # An√°lise de imuniza√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ regional.py              # An√°lise regional
‚îÇ   ‚îú‚îÄ‚îÄ advanced.py              # An√°lises avan√ßadas
‚îÇ   ‚îú‚îÄ‚îÄ epidemiologica.py        # An√°lise epidemiol√≥gica
‚îÇ   ‚îú‚îÄ‚îÄ attack_rate.py           # Taxa de ataque
‚îÇ   ‚îú‚îÄ‚îÄ sir_modeling.py          # Modelagem SIR
‚îÇ   ‚îú‚îÄ‚îÄ explore.py               # Explora√ß√£o livre dos dados
‚îÇ   ‚îú‚îÄ‚îÄ reports.py               # Gera√ß√£o de relat√≥rios
‚îÇ   ‚îî‚îÄ‚îÄ technical.py             # Documenta√ß√£o t√©cnica
‚îú‚îÄ‚îÄ data/                        # Dados processados
‚îÇ   ‚îî‚îÄ‚îÄ processed/               # Arquivos CSV processados
‚îú‚îÄ‚îÄ TABELAS/                     # Dados brutos e consolidados
‚îú‚îÄ‚îÄ dashboard_completo_v2.py     # L√≥gica principal e fun√ß√µes
‚îú‚îÄ‚îÄ requirements.txt             # Depend√™ncias Python
‚îî‚îÄ‚îÄ .venv/                       # Ambiente virtual
</code></pre>

<h3 id="como-a-arquitetura-funciona">Como a Arquitetura Funciona</h3>

<h4 id="1-padrao-modular">1. <strong>Padr√£o Modular</strong></h4>

<ul>
<li><strong><code>main.py</code></strong>: Orquestrador principal - define a interface e navega√ß√£o</li>
<li><strong><code>app_sections/</code></strong>: Cada arquivo representa uma funcionalidade espec√≠fica</li>
<li><strong><code>dashboard_completo_v2.py</code></strong>: Motor de dados - carrega e processa informa√ß√µes</li>
</ul>

<h4 id="2-fluxo-de-dados">2. <strong>Fluxo de Dados</strong></h4>

<pre><code>Dados CSV ‚Üí dashboard_completo_v2.py ‚Üí app_sections/ ‚Üí main.py ‚Üí Interface Web
</code></pre>

<h4 id="3-separacao-de-responsabilidades">3. <strong>Separa√ß√£o de Responsabilidades</strong></h4>

<ul>
<li><strong>Dados</strong>: Pastas <code>data/</code> e <code>TABELAS/</code></li>
<li><strong>L√≥gica</strong>: <code>dashboard_completo_v2.py</code></li>
<li><strong>Interface</strong>: <code>app_sections/</code> + <code>main.py</code></li>
<li><strong>Configura√ß√£o</strong>: <code>requirements.txt</code> + <code>.venv/</code></li>
</ul>

<h4 id="4-sistema-de-navegacao">4. <strong>Sistema de Navega√ß√£o</strong></h4>

<ul>
<li><strong>Sidebar</strong>: Menu lateral com todas as se√ß√µes dispon√≠veis</li>
<li><strong>Tabs</strong>: Cada se√ß√£o √© carregada dinamicamente</li>
<li><strong>Estado</strong>: Streamlit mant√©m o estado entre navega√ß√µes</li>
</ul>

<hr />

<h2 id="deployment-em-servidor-institucional">üåê Deployment em Servidor Institucional</h2>

<h3 id="o-que-e-deployment">O que √© Deployment?</h3>

<p><strong>Deployment</strong> √© o processo de colocar uma aplica√ß√£o rodando localmente em um servidor para que outras pessoas possam acess√°-la pela internet.</p>

<h3 id="por-que-precisamos-de-um-servidor">Por que Precisamos de um Servidor?</h3>

<h4 id="problemas-do-desenvolvimento-local"><strong>Problemas do Desenvolvimento Local:</strong></h4>

<ul>
<li>‚ùå <strong>Apenas voc√™ pode acessar</strong> (localhost)</li>
<li>‚ùå <strong>Aplica√ß√£o para quando voc√™ desliga o computador</strong></li>
<li>‚ùå <strong>Recursos limitados</strong> da sua m√°quina</li>
<li>‚ùå <strong>Sem controle de acesso</strong> ou seguran√ßa</li>
</ul>

<h4 id="solucoes-do-servidor"><strong>Solu√ß√µes do Servidor:</strong></h4>

<ul>
<li>‚úÖ <strong>Acesso p√∫blico</strong>: Qualquer pessoa pode acessar via internet</li>
<li>‚úÖ <strong>Disponibilidade 24/7</strong>: Aplica√ß√£o sempre dispon√≠vel</li>
<li>‚úÖ <strong>Recursos compartilhados</strong>: M√∫ltiplos usu√°rios simult√¢neos</li>
<li>‚úÖ <strong>Seguran√ßa institucional</strong>: Controle de acesso e backup</li>
</ul>

<h4 id="como-o-servidor-resolve-o-problema-do-localhost"><strong>Como o Servidor Resolve o Problema do Localhost:</strong></h4>

<p><strong>1. Endere√ßo IP P√∫blico:</strong></p>

<pre><code>Internet ‚Üí Servidor (IP P√∫blico: 200.150.100.50) ‚Üí Aplica√ß√£o (Porta 8501)
    ‚úÖ         ‚úÖ                                    ‚úÖ
</code></pre>

<ul>
<li><strong>Servidor</strong> tem um <strong>IP p√∫blico</strong> vis√≠vel na internet</li>
<li><strong>DNS</strong> converte <code>imunopreviniveis.fiocruz.br</code> ‚Üí <code>200.150.100.50</code></li>
<li><strong>Qualquer pessoa</strong> pode encontrar o endere√ßo</li>
</ul>

<p><strong>2. Roteamento de Rede:</strong>
- <strong>Internet p√∫blica</strong> sabe onde est√° o servidor
- <strong>Roteadores</strong> encaminham tr√°fego para o IP correto
- <strong>Firewall</strong> permite conex√µes na porta 80/443 (HTTP/HTTPS)</p>

<p><strong>3. Configura√ß√£o de Rede:</strong>
- <strong>Servidor</strong> est√° configurado para aceitar conex√µes externas
- <strong>Nginx</strong> recebe requisi√ß√µes e encaminha para Streamlit
- <strong>Port forwarding</strong> direciona tr√°fego para a aplica√ß√£o</p>

<p><strong>4. Analogia com Servidor:</strong>
- <strong>Servidor</strong> = loja na rua principal com placa vis√≠vel
- <strong>IP p√∫blico</strong> = endere√ßo da loja (Rua das Flores, 123)
- <strong>DNS</strong> = placa da loja ("IMUNOPREVINIVEIS")
- <strong>Internet</strong> = todos os clientes podem encontrar a loja</p>

<h3 id="cenario-fiocruz-rio-de-janeiro">Cen√°rio: Fiocruz Rio de Janeiro</h3>

<h4 id="1-infraestrutura-necessaria">1. <strong>Infraestrutura Necess√°ria</strong></h4>

<pre><code>Internet ‚Üí Firewall ‚Üí Load Balancer ‚Üí Servidor Web ‚Üí Aplica√ß√£o Streamlit
</code></pre>

<h4 id="2-componentes-do-sistema">2. <strong>Componentes do Sistema</strong></h4>

<ul>
<li><strong>Servidor Web</strong>: M√°quina f√≠sica ou virtual rodando Linux</li>
<li><strong>Proxy Reverso</strong>: Nginx ou Apache (gerencia requisi√ß√µes)</li>
<li><strong>Process Manager</strong>: Supervisor ou systemd (mant√©m aplica√ß√£o rodando)</li>
<li><strong>Banco de Dados</strong>: PostgreSQL ou MySQL (se necess√°rio)</li>
<li><strong>Monitoramento</strong>: Logs, m√©tricas de performance</li>
</ul>

<hr />

<h2 id="requisitos-de-sistema">üíª Requisitos de Sistema</h2>

<h3 id="versoes-do-python-e-compatibilidade">Vers√µes do Python e Compatibilidade</h3>

<h4 id="python-312-recomendado"><strong>Python 3.12+ (Recomendado)</strong></h4>

<ul>
<li><strong>Vers√£o atual do projeto</strong>: Python 3.13.7</li>
<li><strong>Vers√£o m√≠nima suportada</strong>: Python 3.10</li>
<li><strong>Vers√£o recomendada para produ√ß√£o</strong>: Python 3.12 LTS</li>
<li><strong>Por que Python 3.12+?</strong>
<ul>
<li>Suporte estendido at√© 2028</li>
<li>Melhor performance e otimiza√ß√µes</li>
<li>Compatibilidade com bibliotecas modernas</li>
<li>Corre√ß√µes de seguran√ßa</li>
</ul></li>
</ul>

<h4 id="compatibilidade-de-bibliotecas"><strong>Compatibilidade de Bibliotecas</strong></h4>

<ul>
<li><strong>Streamlit</strong>: 1.28.0+ (requer Python 3.8+)</li>
<li><strong>Pandas</strong>: 2.0.0+ (requer Python 3.9+)</li>
<li><strong>NumPy</strong>: 1.24.0+ (requer Python 3.9+)</li>
<li><strong>Plotly</strong>: 5.15.0+ (requer Python 3.8+)</li>
</ul>

<h3 id="servidor-de-producao">Servidor de Produ√ß√£o</h3>

<h4 id="especificacoes-minimas"><strong>Especifica√ß√µes M√≠nimas</strong></h4>

<ul>
<li><strong>CPU</strong>: 4 cores (Intel i5 ou AMD Ryzen 5)</li>
<li><strong>RAM</strong>: 8GB DDR4</li>
<li><strong>Armazenamento</strong>: 100GB SSD</li>
<li><strong>Sistema Operacional</strong>: Ubuntu 22.04 LTS ou Rocky Linux 9</li>
</ul>

<h4 id="especificacoes-recomendadas"><strong>Especifica√ß√µes Recomendadas</strong></h4>

<ul>
<li><strong>CPU</strong>: 8 cores (Intel i7 ou AMD Ryzen 7)</li>
<li><strong>RAM</strong>: 16GB DDR5</li>
<li><strong>Armazenamento</strong>: 500GB SSD NVMe</li>
<li><strong>Sistema Operacional</strong>: Ubuntu 24.04 LTS ou Rocky Linux 9</li>
</ul>

<h4 id="software-necessario"><strong>Software Necess√°rio</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Sistema base</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3.12<span class="w"> </span>python3.12-venv<span class="w"> </span>python3-pip
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nginx<span class="w"> </span>supervisor

<span class="c1"># Python e depend√™ncias</span>
python3.12<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/opt/meningite/venv
<span class="nb">source</span><span class="w"> </span>/opt/meningite/venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre>
</div>

<h3 id="rede-e-conectividade">Rede e Conectividade</h3>

<h4 id="configuracao-de-rede"><strong>Configura√ß√£o de Rede</strong></h4>

<ul>
<li><strong>IP P√∫blico</strong>: Endere√ßo vis√≠vel na internet</li>
<li><strong>Porta 80/443</strong>: HTTP/HTTPS padr√£o</li>
<li><strong>Firewall</strong>: Regras para permitir tr√°fego web</li>
<li><strong>DNS</strong>: Nome de dom√≠nio (ex: meningite.fiocruz.br)</li>
</ul>

<h4 id="seguranca-de-rede"><strong>Seguran√ßa de Rede</strong></h4>

<ul>
<li><strong>SSL/TLS</strong>: Certificado para HTTPS</li>
<li><strong>Rate Limiting</strong>: Prote√ß√£o contra ataques</li>
<li><strong>IP Whitelist</strong>: Restri√ß√£o de acesso se necess√°rio</li>
</ul>

<hr />

<h2 id="configuracao-de-seguranca">üîí Configura√ß√£o de Seguran√ßa</h2>

<h3 id="1-usuarios-e-permissoes">1. <strong>Usu√°rios e Permiss√µes</strong></h3>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Criar usu√°rio espec√≠fico para a aplica√ß√£o</span>
sudo<span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>imunopreviniveis
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>www-data<span class="w"> </span>imunopreviniveis

<span class="c1"># Definir permiss√µes</span>
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>imunopreviniveis:www-data<span class="w"> </span>/opt/imunopreviniveis/
sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">755</span><span class="w"> </span>/opt/imunopreviniveis/
</code></pre>
</div>

<h3 id="2-configuracao-do-nginx">2. <strong>Configura√ß√£o do Nginx</strong></h3>

<div class="codehilite">
<pre><span></span><code><span class="c1"># /etc/nginx/sites-available/imunopreviniveis</span>
<span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">imunopreviniveis.fiocruz.br</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://127.0.0.1:8501</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_http_version</span><span class="w"> </span><span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Upgrade</span><span class="w"> </span><span class="nv">$http_upgrade</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Connection</span><span class="w"> </span><span class="s">&#39;upgrade&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
<span class="w">        </span><span class="kn">proxy_cache_bypass</span><span class="w"> </span><span class="nv">$http_upgrade</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="3-configuracao-do-supervisor">3. <strong>Configura√ß√£o do Supervisor</strong></h3>

<div class="codehilite">
<pre><span></span><code><span class="c1"># /etc/supervisor/conf.d/imunopreviniveis.conf</span>
<span class="k">[program:imunopreviniveis]</span>
<span class="na">command</span><span class="o">=</span><span class="s">/opt/imunopreviniveis/venv/bin/streamlit run /opt/imunopreviniveis/app/main.py --server.port 8501 --server.address 127.0.0.1</span>
<span class="na">directory</span><span class="o">=</span><span class="s">/opt/imunopreviniveis</span>
<span class="na">user</span><span class="o">=</span><span class="s">imunopreviniveis</span>
<span class="na">autostart</span><span class="o">=</span><span class="s">true</span>
<span class="na">autorestart</span><span class="o">=</span><span class="s">true</span>
<span class="na">stderr_logfile</span><span class="o">=</span><span class="s">/var/log/imunopreviniveis/err.log</span>
<span class="na">stdout_logfile</span><span class="o">=</span><span class="s">/var/log/imunopreviniveis/out.log</span>
</code></pre>
</div>

<h3 id="4-firewall-e-seguranca">4. <strong>Firewall e Seguran√ßa</strong></h3>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Configurar UFW (Uncomplicated Firewall)</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">22</span>/tcp<span class="w">    </span><span class="c1"># SSH</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">80</span>/tcp<span class="w">    </span><span class="c1"># HTTP</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">443</span>/tcp<span class="w">   </span><span class="c1"># HTTPS</span>
sudo<span class="w"> </span>ufw<span class="w"> </span><span class="nb">enable</span>
</code></pre>
</div>

<hr />

<h2 id="processo-de-deployment">üöÄ Processo de Deployment</h2>

<h3 id="passo-a-passo-completo">Passo a Passo Completo</h3>

<h4 id="1-preparacao-do-servidor"><strong>1. Prepara√ß√£o do Servidor</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Conectar via SSH</span>
ssh<span class="w"> </span>usuario@servidor.fiocruz.br

<span class="c1"># Atualizar sistema</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y

<span class="c1"># Instalar depend√™ncias</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3.9<span class="w"> </span>python3.9-venv<span class="w"> </span>python3-pip<span class="w"> </span>nginx<span class="w"> </span>supervisor
</code></pre>
</div>

<h4 id="2-configuracao-do-ambiente-python"><strong>2. Configura√ß√£o do Ambiente Python</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Criar diret√≥rio da aplica√ß√£o</span>
sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/imunopreviniveis
sudo<span class="w"> </span>chown<span class="w"> </span><span class="nv">$USER</span>:<span class="nv">$USER</span><span class="w"> </span>/opt/imunopreviniveis

<span class="c1"># Copiar c√≥digo do projeto</span>
scp<span class="w"> </span>-r<span class="w"> </span>./*<span class="w"> </span>usuario@servidor:/opt/imunopreviniveis/

<span class="c1"># Criar ambiente virtual</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
python3.12<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre>
</div>

<h4 id="3-configuracao-dos-servicos"><strong>3. Configura√ß√£o dos Servi√ßos</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Configurar Nginx</span>
sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/etc/nginx/sites-available/imunopreviniveis<span class="w"> </span>/etc/nginx/sites-enabled/
sudo<span class="w"> </span>nginx<span class="w"> </span>-t
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx

<span class="c1"># Configurar Supervisor</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>reread
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>update
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>start<span class="w"> </span>imunopreviniveis
</code></pre>
</div>

<h4 id="4-teste-e-validacao"><strong>4. Teste e Valida√ß√£o</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Verificar status dos servi√ßos</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>nginx
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>status<span class="w"> </span>imunopreviniveis

<span class="c1"># Verificar logs</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/out.log
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/nginx/error.log

<span class="c1"># Verificar vers√£o do Python</span>
python3<span class="w"> </span>--version
pip<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;(streamlit|pandas|numpy|plotly)&quot;</span>
</code></pre>
</div>

<hr />

<h2 id="manutencao-e-atualizacoes">üõ†Ô∏è Manuten√ß√£o e Atualiza√ß√µes</h2>

<h3 id="acesso-remoto-ao-servidor-de-casa">üîë Acesso Remoto ao Servidor (De Casa)</h3>

<h4 id="1-configuracao-inicial-de-acesso-ssh"><strong>1. Configura√ß√£o Inicial de Acesso SSH</strong></h4>

<h5 id="passo-1-gerar-chave-ssh-na-sua-maquina"><strong>Passo 1: Gerar Chave SSH na Sua M√°quina</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># No seu computador de casa (Windows PowerShell ou Linux/Mac)</span>
ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-C<span class="w"> </span><span class="s2">&quot;seu.email@fiocruz.br&quot;</span>

<span class="c1"># A chave ser√° salva em:</span>
<span class="c1"># Windows: C:\Users\seu_usuario\.ssh\id_rsa</span>
<span class="c1"># Linux/Mac: ~/.ssh/id_rsa</span>
</code></pre>
</div>

<h5 id="passo-2-adicionar-chave-ao-servidor"><strong>Passo 2: Adicionar Chave ao Servidor</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Copiar sua chave p√∫blica para o servidor</span>
ssh-copy-id<span class="w"> </span>seu_usuario@servidor.fiocruz.br

<span class="c1"># Ou manualmente:</span>
<span class="c1"># 1. Copiar conte√∫do de ~/.ssh/id_rsa.pub</span>
<span class="c1"># 2. Adicionar ao arquivo ~/.ssh/authorized_keys no servidor</span>
</code></pre>
</div>

<h5 id="passo-3-testar-conexao"><strong>Passo 3: Testar Conex√£o</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Conectar ao servidor</span>
ssh<span class="w"> </span>seu_usuario@servidor.fiocruz.br

<span class="c1"># Se funcionar, voc√™ ver√° o prompt do servidor:</span>
<span class="c1"># seu_usuario@servidor:~$</span>
</code></pre>
</div>

<h4 id="2-acesso-diario-ao-projeto"><strong>2. Acesso Di√°rio ao Projeto</strong></h4>

<h5 id="conectar-ao-servidor"><strong>Conectar ao Servidor</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># De casa, conecte via SSH</span>
ssh<span class="w"> </span>seu_usuario@servidor.fiocruz.br

<span class="c1"># Navegar para o projeto</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis

<span class="c1"># Ver estrutura do projeto</span>
ls<span class="w"> </span>-la
</code></pre>
</div>

<h5 id="verificar-status-da-aplicacao"><strong>Verificar Status da Aplica√ß√£o</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Ver se est√° rodando</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>status<span class="w"> </span>imunopreviniveis

<span class="c1"># Ver logs em tempo real</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/out.log

<span class="c1"># Ver uso de recursos</span>
htop
</code></pre>
</div>

<h4 id="3-trabalhando-com-o-codigo"><strong>3. Trabalhando com o C√≥digo</strong></h4>

<h5 id="editar-arquivos-diretamente-no-servidor"><strong>Editar Arquivos Diretamente no Servidor</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Usar editor de texto (nano, vim, ou instalar code)</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nano<span class="w"> </span>vim

<span class="c1"># Editar arquivo principal</span>
nano<span class="w"> </span>app/main.py

<span class="c1"># Ou instalar Visual Studio Code no servidor</span>
sudo<span class="w"> </span>snap<span class="w"> </span>install<span class="w"> </span>code<span class="w"> </span>--classic
code<span class="w"> </span>app/main.py
</code></pre>
</div>

<h5 id="sincronizar-codigo-com-seu-computador"><strong>Sincronizar C√≥digo com Seu Computador</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Op√ß√£o 1: Usar rsync para sincronizar</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--delete<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/<span class="w"> </span>./imunopreviniveis_local/

<span class="c1"># Op√ß√£o 2: Usar Git (recomendado)</span>
<span class="c1"># No servidor:</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
git<span class="w"> </span>init
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Vers√£o inicial&quot;</span>

<span class="c1"># No seu computador:</span>
git<span class="w"> </span>clone<span class="w"> </span>ssh://seu_usuario@servidor.fiocruz.br/opt/imunopreviniveis
</code></pre>
</div>

<h4 id="4-fluxo-de-desenvolvimento-remoto"><strong>4. Fluxo de Desenvolvimento Remoto</strong></h4>

<h5 id="ciclo-de-desenvolvimento"><strong>Ciclo de Desenvolvimento</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># 1. Conectar ao servidor</span>
ssh<span class="w"> </span>seu_usuario@servidor.fiocruz.br

<span class="c1"># 2. Fazer altera√ß√µes no c√≥digo</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
nano<span class="w"> </span>app/main.py

<span class="c1"># 3. Testar altera√ß√µes</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>restart<span class="w"> </span>imunopreviniveis

<span class="c1"># 4. Verificar se funcionou</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>status<span class="w"> </span>imunopreviniveis

<span class="c1"># 5. Ver logs para debug</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/out.log
</code></pre>
</div>

<h5 id="sincronizacao-bidirecional"><strong>Sincroniza√ß√£o Bidirecional</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Do servidor para seu computador</span>
scp<span class="w"> </span>-r<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/app/<span class="w"> </span>./app_servidor/

<span class="c1"># Do seu computador para o servidor</span>
scp<span class="w"> </span>-r<span class="w"> </span>./app/<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/
</code></pre>
</div>

<h4 id="2-scripts-de-deploy-automatizado"><strong>2. Scripts de Deploy Automatizado</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># deploy.sh</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>restart<span class="w"> </span>imunopreviniveis
</code></pre>
</div>

<h4 id="3-adicionando-novas-funcionalidades"><strong>3. Adicionando Novas Funcionalidades</strong></h4>

<h5 id="passo-1-criar-nova-secao"><strong>Passo 1: Criar Nova Se√ß√£o</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># No servidor, criar novo arquivo</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis/app_sections
nano<span class="w"> </span>nova_analise.py

<span class="c1"># Estrutura b√°sica para nova se√ß√£o:</span>
import<span class="w"> </span>streamlit<span class="w"> </span>as<span class="w"> </span>st
from<span class="w"> </span>typing<span class="w"> </span>import<span class="w"> </span>Dict,<span class="w"> </span>Any

def<span class="w"> </span>show_nova_analise<span class="o">(</span>dados:<span class="w"> </span>Dict<span class="o">[</span>str,<span class="w"> </span>Any<span class="o">])</span><span class="w"> </span>-&gt;<span class="w"> </span>None:
<span class="w">    </span>st.title<span class="o">(</span><span class="s2">&quot;üî¨ Nova An√°lise&quot;</span><span class="o">)</span>
<span class="w">    </span>st.write<span class="o">(</span><span class="s2">&quot;Descri√ß√£o da nova funcionalidade&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="c1"># Sua l√≥gica aqui</span>
<span class="w">    </span>st.write<span class="o">(</span><span class="s2">&quot;Implementar an√°lise espec√≠fica...&quot;</span><span class="o">)</span>
</code></pre>
</div>

<h5 id="passo-2-integrar-ao-menu-principal"><strong>Passo 2: Integrar ao Menu Principal</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Editar main.py para incluir nova se√ß√£o</span>
nano<span class="w"> </span>app/main.py

<span class="c1"># Adicionar import:</span>
from<span class="w"> </span>app_sections.nova_analise<span class="w"> </span>import<span class="w"> </span>show_nova_analise

<span class="c1"># Adicionar ao menu:</span>
<span class="nv">opcao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>st.sidebar.selectbox<span class="o">(</span>
<span class="w">    </span><span class="s2">&quot;Selecione a se√ß√£o:&quot;</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">        </span><span class="s2">&quot;üè† Vis√£o Geral 2024&quot;</span>,
<span class="w">        </span><span class="s2">&quot;üìä An√°lise de Casos&quot;</span>,
<span class="w">        </span><span class="c1"># ... outras op√ß√µes ...</span>
<span class="w">        </span><span class="s2">&quot;üî¨ Nova An√°lise&quot;</span>,<span class="w">  </span><span class="c1"># NOVA OP√á√ÉO</span>
<span class="w">    </span><span class="o">]</span>,
<span class="o">)</span>

<span class="c1"># Adicionar l√≥gica de execu√ß√£o:</span>
<span class="k">elif</span><span class="w"> </span><span class="nv">opcao</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;üî¨ Nova An√°lise&quot;</span>:
<span class="w">    </span>show_nova_analise<span class="o">(</span>dados<span class="o">)</span>
</code></pre>
</div>

<h5 id="passo-3-testar-e-deploy"><strong>Passo 3: Testar e Deploy</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Reiniciar aplica√ß√£o para testar</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>restart<span class="w"> </span>imunopreviniveis

<span class="c1"># Verificar se funcionou</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>status<span class="w"> </span>imunopreviniveis

<span class="c1"># Ver logs para debug</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/out.log
</code></pre>
</div>

<h4 id="4-atualizando-dados"><strong>4. Atualizando Dados</strong></h4>

<h5 id="adicionar-novos-arquivos-csv"><strong>Adicionar Novos Arquivos CSV</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Copiar novos dados para o servidor</span>
scp<span class="w"> </span>novo_arquivo.csv<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/TABELAS/

<span class="c1"># Ou usar rsync para sincronizar pasta inteira</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--delete<span class="w"> </span>./TABELAS/<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/TABELAS/
</code></pre>
</div>

<h5 id="atualizar-codigo-de-processamento"><strong>Atualizar C√≥digo de Processamento</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Editar dashboard_completo_v2.py para incluir novos dados</span>
nano<span class="w"> </span>dashboard_completo_v2.py

<span class="c1"># Adicionar fun√ß√£o para carregar novos dados</span>
def<span class="w"> </span>load_novos_dados<span class="o">()</span>:
<span class="w">    </span><span class="c1"># Sua l√≥gica aqui</span>
<span class="w">    </span>pass

<span class="c1"># Integrar na fun√ß√£o load_all_data()</span>
</code></pre>
</div>

<h3 id="monitoramento">Monitoramento</h3>

<h4 id="1-logs-e-metricas"><strong>1. Logs e M√©tricas</strong></h4>

<ul>
<li><strong>Logs da aplica√ß√£o</strong>: <code>/var/log/meningite/</code></li>
<li><strong>Logs do Nginx</strong>: <code>/var/log/nginx/</code></li>
<li><strong>M√©tricas do sistema</strong>: <code>htop</code>, <code>iotop</code>, <code>nethogs</code></li>
</ul>

<h4 id="2-backup-e-recuperacao"><strong>2. Backup e Recupera√ß√£o</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Backup autom√°tico di√°rio</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>tar<span class="w"> </span>-czf<span class="w"> </span>/backup/imunopreviniveis-<span class="k">$(</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="se">\%</span>d<span class="k">)</span>.tar.gz<span class="w"> </span>/opt/imunopreviniveis/
</code></pre>
</div>

<h4 id="3-atualizacoes-de-seguranca"><strong>3. Atualiza√ß√µes de Seguran√ßa</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Atualiza√ß√µes autom√°ticas de seguran√ßa</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>unattended-upgrades
sudo<span class="w"> </span>dpkg-reconfigure<span class="w"> </span>-plow<span class="w"> </span>unattended-upgrades
</code></pre>
</div>

<h4 id="4-atualizacoes-do-python"><strong>4. Atualiza√ß√µes do Python</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Verificar vers√µes dispon√≠veis</span>
sudo<span class="w"> </span>apt<span class="w"> </span>list<span class="w"> </span>--upgradable<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>python3

<span class="c1"># Atualizar Python (se necess√°rio)</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3.12<span class="w"> </span>python3.12-venv

<span class="c1"># Recriar ambiente virtual com nova vers√£o</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
rm<span class="w"> </span>-rf<span class="w"> </span>venv
python3.12<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre>
</div>

<h3 id="ferramentas-de-desenvolvimento-remoto">üõ†Ô∏è Ferramentas de Desenvolvimento Remoto</h3>

<h4 id="1-editores-de-codigo-no-servidor"><strong>1. Editores de C√≥digo no Servidor</strong></h4>

<h5 id="visual-studio-code-recomendado"><strong>Visual Studio Code (Recomendado)</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Instalar VS Code no servidor</span>
sudo<span class="w"> </span>snap<span class="w"> </span>install<span class="w"> </span>code<span class="w"> </span>--classic

<span class="c1"># Abrir projeto</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
code<span class="w"> </span>.

<span class="c1"># Configurar extens√µes Python</span>
<span class="c1"># - Python (Microsoft)</span>
<span class="c1"># - Pylance</span>
<span class="c1"># - Python Indent</span>
<span class="c1"># - Streamlit</span>
</code></pre>
</div>

<h5 id="editores-de-terminal"><strong>Editores de Terminal</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Nano (simples)</span>
nano<span class="w"> </span>app/main.py

<span class="c1"># Vim (avan√ßado)</span>
vim<span class="w"> </span>app/main.py

<span class="c1"># Micro (moderno)</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>micro
micro<span class="w"> </span>app/main.py
</code></pre>
</div>

<h4 id="2-desenvolvimento-local-sincronizacao"><strong>2. Desenvolvimento Local + Sincroniza√ß√£o</strong></h4>

<h5 id="configuracao-de-ambiente-local"><strong>Configura√ß√£o de Ambiente Local</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># No seu computador de casa</span>
git<span class="w"> </span>clone<span class="w"> </span>ssh://seu_usuario@servidor.fiocruz.br/opt/imunopreviniveis
<span class="nb">cd</span><span class="w"> </span>imunopreviniveis

<span class="c1"># Criar ambiente virtual local</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w">  </span><span class="c1"># Linux/Mac</span>
<span class="c1"># ou</span>
.venv<span class="se">\S</span>cripts<span class="se">\A</span>ctivate.ps1<span class="w">  </span><span class="c1"># Windows</span>

<span class="c1"># Instalar depend√™ncias</span>
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre>
</div>

<h5 id="sincronizacao-automatica"><strong>Sincroniza√ß√£o Autom√°tica</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Script para sincronizar automaticamente</span>
<span class="c1"># sync_to_server.sh</span>
<span class="c1">#!/bin/bash</span>
rsync<span class="w"> </span>-avz<span class="w"> </span>--delete<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--exclude<span class="o">=</span><span class="s1">&#39;.venv&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--exclude<span class="o">=</span><span class="s1">&#39;__pycache__&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--exclude<span class="o">=</span><span class="s1">&#39;*.pyc&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>./<span class="w"> </span>seu_usuario@servidor.fiocruz.br:/opt/imunopreviniveis/

<span class="c1"># Executar sempre que fizer altera√ß√µes</span>
./sync_to_server.sh
</code></pre>
</div>

<h4 id="3-debug-e-testes-remotos"><strong>3. Debug e Testes Remotos</strong></h4>

<h5 id="logs-em-tempo-real"><strong>Logs em Tempo Real</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Conectar ao servidor e monitorar logs</span>
ssh<span class="w"> </span>seu_usuario@servidor.fiocruz.br
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis

<span class="c1"># Ver logs da aplica√ß√£o</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/out.log

<span class="c1"># Ver logs de erro</span>
sudo<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/imunopreviniveis/err.log

<span class="c1"># Ver logs do sistema</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>supervisor<span class="w"> </span>-f
</code></pre>
</div>

<h5 id="testes-rapidos"><strong>Testes R√°pidos</strong></h5>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Testar altera√ß√µes sem reiniciar tudo</span>
<span class="nb">cd</span><span class="w"> </span>/opt/imunopreviniveis
<span class="nb">source</span><span class="w"> </span>venv/bin/activate

<span class="c1"># Testar m√≥dulo espec√≠fico</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from app_sections.nova_analise import show_nova_analise; print(&#39;OK&#39;)&quot;</span>

<span class="c1"># Testar import principal</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from app.main import main; print(&#39;Main OK&#39;)&quot;</span>
</code></pre>
</div>

<hr />

<h2 id="diferencas-local-vs-producao">üìä Diferen√ßas: Local vs. Produ√ß√£o</h2>

<h3 id="comparacao-tecnica-detalhada"><strong>Compara√ß√£o T√©cnica Detalhada</strong></h3>

<table>
<thead>
<tr>
  <th>Aspecto</th>
  <th>Desenvolvimento Local</th>
  <th>Servidor de Produ√ß√£o</th>
</tr>
</thead>
<tbody>
<tr>
  <td><strong>Acesso</strong></td>
  <td>Apenas voc√™ (localhost)</td>
  <td>Qualquer pessoa (internet)</td>
</tr>
<tr>
  <td><strong>Disponibilidade</strong></td>
  <td>Quando voc√™ executa</td>
  <td>24/7</td>
</tr>
<tr>
  <td><strong>Recursos</strong></td>
  <td>Sua m√°quina</td>
  <td>Servidor dedicado</td>
</tr>
<tr>
  <td><strong>Seguran√ßa</strong></td>
  <td>B√°sica</td>
  <td>Firewall, SSL, usu√°rios</td>
</tr>
<tr>
  <td><strong>Backup</strong></td>
  <td>Manual</td>
  <td>Automatizado</td>
</tr>
<tr>
  <td><strong>Monitoramento</strong></td>
  <td>Console</td>
  <td>Logs, m√©tricas, alertas</td>
</tr>
<tr>
  <td><strong>Atualiza√ß√µes</strong></td>
  <td>Manual</td>
  <td>Scripts automatizados</td>
</tr>
</tbody>
</table>

<h3 id="por-que-localhost-nao-funciona-na-internet"><strong>Por que Localhost N√£o Funciona na Internet?</strong></h3>

<h4 id="1-enderecamento-de-rede"><strong>1. Endere√ßamento de Rede</strong></h4>

<pre><code>Desenvolvimento Local:
Sua M√°quina: 127.0.0.1 (localhost) ‚Üí Porta 8501
    ‚ùå IP privado, n√£o rote√°vel
    ‚ùå Apenas acess√≠vel localmente
    ‚ùå Internet n√£o sabe onde est√°

Servidor de Produ√ß√£o:
Internet ‚Üí 200.150.100.50 (IP p√∫blico) ‚Üí Porta 80/443 ‚Üí Porta 8501
    ‚úÖ IP p√∫blico, rote√°vel
    ‚úÖ Acess√≠vel globalmente
    ‚úÖ Internet sabe exatamente onde est√°
</code></pre>

<h4 id="2-roteamento-e-dns"><strong>2. Roteamento e DNS</strong></h4>

<pre><code>Localhost:
Internet ‚Üí ‚ùå N√£o sabe onde est√° 127.0.0.1
Roteador ‚Üí ‚ùå N√£o encaminha para sua m√°quina
Sua M√°quina ‚Üí ‚úÖ Apenas voc√™ pode acessar

Servidor:
Internet ‚Üí ‚úÖ Sabe onde est√° o IP p√∫blico
Roteador ‚Üí ‚úÖ Encaminha para o servidor
Servidor ‚Üí ‚úÖ Qualquer pessoa pode acessar
</code></pre>

<h4 id="3-configuracao-de-rede"><strong>3. Configura√ß√£o de Rede</strong></h4>

<pre><code>Localhost:
- ‚ùå Sem configura√ß√£o de firewall para conex√µes externas
- ‚ùå Sem port forwarding
- ‚ùå Sem proxy reverso
- ‚ùå Sem configura√ß√£o de rede p√∫blica

Servidor:
- ‚úÖ Firewall configurado para permitir tr√°fego web
- ‚úÖ Port forwarding configurado
- ‚úÖ Nginx como proxy reverso
- ‚úÖ Configura√ß√£o de rede p√∫blica
</code></pre>

<h4 id="4-seguranca-e-acesso"><strong>4. Seguran√ßa e Acesso</strong></h4>

<pre><code>Localhost:
- ‚ùå Sem controle de acesso
- ‚ùå Sem autentica√ß√£o
- ‚ùå Sem logs de acesso
- ‚ùå Sem prote√ß√£o contra ataques

Servidor:
- ‚úÖ Controle de acesso configurado
- ‚úÖ Autentica√ß√£o se necess√°rio
- ‚úÖ Logs detalhados de acesso
- ‚úÖ Firewall e prote√ß√µes ativas
</code></pre>

<hr />

<h2 id="troubleshooting-comum">üîç Troubleshooting Comum</h2>

<h3 id="problemas-frequentes">Problemas Frequentes</h3>

<h4 id="1-aplicacao-nao-inicia"><strong>1. Aplica√ß√£o n√£o inicia</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Verificar logs</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>tail<span class="w"> </span>imunopreviniveis

<span class="c1"># Verificar depend√™ncias</span>
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>streamlit
</code></pre>
</div>

<h4 id="2-erro-502-bad-gateway"><strong>2. Erro 502 Bad Gateway</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Verificar se Streamlit est√° rodando</span>
sudo<span class="w"> </span>supervisorctl<span class="w"> </span>status<span class="w"> </span>imunopreviniveis

<span class="c1"># Verificar porta</span>
netstat<span class="w"> </span>-tlnp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">8501</span>
</code></pre>
</div>

<h4 id="3-problemas-de-performance"><strong>3. Problemas de Performance</strong></h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Verificar uso de recursos</span>
htop
df<span class="w"> </span>-h
free<span class="w"> </span>-h
</code></pre>
</div>

<hr />

<h2 id="recursos-adicionais">üìö Recursos Adicionais</h2>

<h3 id="documentacao-oficial">Documenta√ß√£o Oficial</h3>

<ul>
<li><a href="https://docs.streamlit.io/streamlit-community-cloud/deploy-your-app">Streamlit Deployment</a></li>
<li><a href="https://nginx.org/en/docs/">Nginx Configuration</a></li>
<li><a href="http://supervisord.org/">Supervisor Documentation</a></li>
</ul>

<h3 id="ferramentas-uteis">Ferramentas √öteis</h3>

<ul>
<li><strong>Monitoramento</strong>: Prometheus + Grafana</li>
<li><strong>Logs</strong>: ELK Stack (Elasticsearch, Logstash, Kibana)</li>
<li><strong>CI/CD</strong>: GitHub Actions, GitLab CI</li>
<li><strong>Containeriza√ß√£o</strong>: Docker + Docker Compose</li>
</ul>

<hr />

<h2 id="conclusao">‚ú® Conclus√£o</h2>

<p>Este guia fornece uma vis√£o completa de como:
1. <strong>Desenvolver localmente</strong> com Streamlit
2. <strong>Entender a arquitetura</strong> modular do projeto
3. <strong>Configurar um servidor de produ√ß√£o</strong> institucional
4. <strong>Manter e atualizar</strong> a aplica√ß√£o de forma segura
5. <strong>Acessar remotamente</strong> o servidor de casa
6. <strong>Desenvolver e modificar</strong> o c√≥digo remotamente</p>

<p>A aplica√ß√£o est√° estruturada de forma profissional e modular, facilitando tanto o desenvolvimento local quanto o deployment em produ√ß√£o. O Streamlit oferece uma experi√™ncia de desenvolvimento √°gil, enquanto a arquitetura permite escalabilidade e manutenibilidade.</p>

<p>Para a Fiocruz ou qualquer institui√ß√£o de ensino, este projeto representa uma solu√ß√£o robusta para disponibilizar dados de meningite de forma acess√≠vel e interativa para pesquisadores, profissionais de sa√∫de e o p√∫blico em geral.</p>

<hr />

<h2 id="resumo-do-fluxo-de-trabalho-diario">üöÄ <strong>Resumo do Fluxo de Trabalho Di√°rio</strong></h2>

<h3 id="de-casa-para-o-servidor"><strong>De Casa para o Servidor:</strong></h3>

<ol>
<li><strong>Conectar</strong>: <code>ssh seu_usuario@servidor.fiocruz.br</code></li>
<li><strong>Navegar</strong>: <code>cd /opt/meningite</code></li>
<li><strong>Editar</strong>: <code>code .</code> ou <code>nano app/main.py</code></li>
<li><strong>Testar</strong>: <code>sudo supervisorctl restart meningite</code></li>
<li><strong>Verificar</strong>: <code>sudo tail -f /var/log/meningite/out.log</code></li>
</ol>

<h3 id="sincronizacao-com-seu-computador"><strong>Sincroniza√ß√£o com Seu Computador:</strong></h3>

<ol>
<li><strong>Desenvolver localmente</strong> com VS Code</li>
<li><strong>Sincronizar para servidor</strong>: <code>./sync_to_server.sh</code></li>
<li><strong>Testar no servidor</strong>: reiniciar aplica√ß√£o</li>
<li><strong>Ver resultado</strong>: acessar via navegador</li>
</ol>

<h3 id="adicionar-novas-funcionalidades"><strong>Adicionar Novas Funcionalidades:</strong></h3>

<ol>
<li><strong>Criar arquivo</strong>: <code>app_sections/nova_funcionalidade.py</code></li>
<li><strong>Integrar menu</strong>: editar <code>app/main.py</code></li>
<li><strong>Testar</strong>: reiniciar aplica√ß√£o</li>
<li><strong>Deploy</strong>: sincronizar com servidor</li>
</ol>

<h3 id="atualizar-dados"><strong>Atualizar Dados:</strong></h3>

<ol>
<li><strong>Copiar novos CSV</strong>: <code>scp dados.csv servidor:/opt/meningite/TABELAS/</code></li>
<li><strong>Atualizar c√≥digo</strong>: modificar <code>dashboard_completo_v2.py</code></li>
<li><strong>Testar</strong>: reiniciar aplica√ß√£o</li>
<li><strong>Verificar</strong>: acessar dashboard</li>
</ol>

<p><strong>üéØ Resultado</strong>: Voc√™ pode trabalhar de casa como se estivesse no servidor, com acesso completo ao c√≥digo, dados e aplica√ß√£o em produ√ß√£o!</p>

<hr />

<h2 id="nota-sobre-o-nome-do-projeto">üìù <strong>Nota sobre o Nome do Projeto</strong></h2>

<p>Este guia foi adaptado para o projeto <strong>IMUNOPREVINIVEIS</strong>, que √© um dashboard abrangente para an√°lise de dados de doen√ßas imunopreven√≠veis no Brasil. O projeto inclui an√°lises de:</p>

<ul>
<li><strong>Casos de doen√ßas</strong> imunopreven√≠veis</li>
<li><strong>Dados de imuniza√ß√£o</strong> e cobertura vacinal</li>
<li><strong>An√°lises epidemiol√≥gicas</strong> regionais</li>
<li><strong>Modelagem matem√°tica</strong> de surtos</li>
<li><strong>Relat√≥rios t√©cnicos</strong> para profissionais de sa√∫de</li>
</ul>

<p>O nome <strong>IMUNOPREVINIVEIS</strong> reflete o foco do projeto em doen√ßas que podem ser prevenidas atrav√©s de vacina√ß√£o, incluindo mas n√£o se limitando a meningite, sarampo, caxumba, rub√©ola, poliomielite e outras doen√ßas imunopreven√≠veis importantes para a sa√∫de p√∫blica brasileira.</p>

    </body>
    </html>
    